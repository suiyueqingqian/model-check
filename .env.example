# ==========================================
# NewAPI Model Check - 环境变量配置
# ==========================================
# 项目地址: https://github.com/chxcodepro/newapi-model-check
# 复制此文件为 .env 并修改配置

# ==========================================
# 部署模式（通过 COMPOSE_PROFILES 控制）
# ==========================================

# local  = 本地 PostgreSQL + 本地 Redis（默认）
# redis  = 云端数据库 + 本地 Redis
# db     = 本地 PostgreSQL + 云端 Redis
# 不设置 = 全部使用云端服务

COMPOSE_PROFILES="local"

# ==========================================
# 数据库配置
# ==========================================

# 本地开发连接（Prisma CLI / npm run dev 使用）
DATABASE_URL="postgresql://newapi:newapi123456@localhost:5432/newapi_monitor"
REDIS_URL="redis://localhost:6379"

# Docker 容器连接（本地模式无需设置，默认走 Docker 内网）
# 使用云端服务时取消注释并填写：

# PostgreSQL (Supabase/Neon)
# DOCKER_DATABASE_URL="postgresql://postgres:password@db.xxxx.supabase.co:5432/postgres"
# DOCKER_DATABASE_URL="postgresql://user:password@xxx.neon.tech/neondb?sslmode=require"

# TiDB Cloud (需先切换 schema: cp prisma/schema.mysql.prisma prisma/schema.prisma)
# DOCKER_DATABASE_URL="mysql://user:password@gateway01.xx.tidbcloud.com:4000/newapi_monitor?sslaccept=strict"

# Redis (Upstash)
# DOCKER_REDIS_URL="redis://default:password@xxx.upstash.io:6379"

# ==========================================
# 安全配置（必须修改）
# ==========================================

# 管理员密码
ADMIN_PASSWORD="change-this-password"

# JWT 密钥（建议用 openssl rand -base64 32 生成）
JWT_SECRET="change-this-secret-key"

# ==========================================
# 可选配置
# ==========================================

# 自动检测开关（true/false，默认 true）
# AUTO_DETECT_ENABLED="true"

# 检测提示词
# DETECT_PROMPT="1+1=2? yes or no"

# 全局代理（支持 HTTP/HTTPS/SOCKS5）
# GLOBAL_PROXY="http://127.0.0.1:7890"
# GLOBAL_PROXY="socks5://127.0.0.1:1080"

# 检测周期（cron 格式，默认每天 0/8/12/16/20 点）
# CRON_SCHEDULE="0 0,8,12,16,20 * * *"

# 定时任务时区（默认 Asia/Shanghai）
# CRON_TIMEZONE="Asia/Shanghai"

# 并发控制
# CHANNEL_CONCURRENCY="5"       # 单渠道最大并发数
# MAX_GLOBAL_CONCURRENCY="30"   # 全局最大并发数
# DETECTION_MIN_DELAY_MS="3000" # 检测前最小延迟（ms）
# DETECTION_MAX_DELAY_MS="5000" # 检测前最大延迟（ms）

# 清理周期（cron 格式，默认每日凌晨 2 点）
# CLEANUP_SCHEDULE="0 2 * * *"

# 日志保留天数
# LOG_RETENTION_DAYS="7"

# ==========================================
# 端口映射（Docker 部署时使用）
# ==========================================

# 应用端口
# APP_PORT="3000"

# PostgreSQL 端口
# POSTGRES_PORT="5432"

# Redis 端口
# REDIS_PORT="6379"

# ==========================================
# WebDAV 同步配置（可选）
# ==========================================
# 注意：坚果云用户需要先在网页端创建同步文件夹（如 newapi），
# 然后 WEBDAV_URL 设置为该文件夹路径

# WebDAV 服务器地址（必须包含已存在的同步文件夹）
# WEBDAV_URL="https://dav.jianguoyun.com/dav/newapi"

# WebDAV 用户名
# WEBDAV_USERNAME="your-email@example.com"

# WebDAV 密码/应用密码（坚果云需使用应用密码，非登录密码）
# WEBDAV_PASSWORD="your-app-password"

# 同步文件路径（可包含子目录，如 "backup/channels.json"）
# 子目录会自动创建，但根目录（如 newapi）需要先在网页端创建
# WEBDAV_FILENAME="newapi-channels.json"

# ==========================================
# 代理接口配置（可选）
# ==========================================

# 代理接口密钥（不设置则自动生成，重启后会变化）
# 建议设置固定值以保持密钥稳定
# PROXY_API_KEY="sk-your-proxy-api-key"
